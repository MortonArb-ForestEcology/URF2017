file.name <- "master_trw.rwl"
library(dplR)
tr.path <- "~/Google Drive/Morton Summer 2017/East Woods/Rollinson_Monitoring/Data/Tree Cores/RawRingWidths"
setwd("~/Github/URF2017/")
rawringfiles <- Sys.glob(file.path(tr.path, "*.rwl"))
permtree.data <-read.csv(file = "~/Github/EastWoods-MonitoringPlots/TreeCensus_2017/data/TreeData-raw_data.csv", na.strings = "", colClasses=c("Tag"="character"))
temptree.data <-read.csv("~/Github/EastWoods-MonitoringPlots/TreeCensus_2017/data/URF_2017_AdditionalOakData-raw_data.csv", na.strings="", colClasses=c("Tag"="character"))
names(permtree.data)[6] <- "Species"
permtree.data[,3] <- as.character(permtree.data[,3])
temptree.data[,3] <- as.character(temptree.data[,3])
tree.species <- rbind(permtree.data[,c(3,6)], temptree.data[,c(3,4)])
tree.species$Species <- as.factor(substr(tree.species$Species, 1, 2))
rw.names <- dir(tr.path)
trw.names <- rw.names[grep('ring width', rw.names)]
trw.names.split <- strsplit(trw.names, "-")
files.all <- read.rwl(file.path(tr.path, trw.names[1]))
aa <- trw.names.split[[1]]
nam <- paste0(as.character(tree.species[tree.species$Tag==aa[3],2]), paste(aa[c(3, 4, 6)], collapse=""))
names(files.all) <- nam
for(i in 2:length(trw.names)){
file.tmp <- read.rwl(file.path(tr.path, trw.names[i]))
aa <- trw.names.split[[i]]
nam <- paste0(as.character(tree.species[tree.species$Tag==aa[3],2]), paste(aa[c(3, 4, 6)], collapse=""))
names(file.tmp) <- nam
# Appending each file to the master list
files.all <- combine.rwl(files.all, file.tmp)
}
View(files.all)
dim(files.all)
42 + 71
113 / 2
